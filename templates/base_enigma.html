{% load staticfiles %}
<!DOCTYPE HTML>
<html>
{% block head %}
    <head>
        <meta charset="utf-8">
        <meta name = "viewport" content = "width = device-width, initial-scale = 0.8">
        <title>{% block title %}RH{% endblock %}</title>

        <!-- Compiled and minified CSS -->

        <link rel="stylesheet" href="{% static 'css/style.css' %}">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    </head>
{% endblock %}


<body>
    <div>
        <span id="minutes"></span>:<span id="seconds"></span>
    {% block enigma %}
    {% endblock %}

    {% block form_enigma %}
    <div class="form-container">
        <form method="POST" class="post-form">
            {% csrf_token %}
            <input type="text" name="response" required>
            <input type="number" name="time" id="time" hidden>
            <input type="submit" id="submit" value="Ok">
        </form>
    </div>
    {% endblock %}
    </div>
</body>
{% block javascript %}
<script>
    var timestamp = Math.round(+new Date()/1000);
    console.log(timestamp);
    document.getElementById('submit').addEventListener('click', function(){
            var total = Math.round(+new Date()/1000) - timestamp;
            document.getElementById('time').value = total;
    });

    var sec = 0;
    function pad ( val ) { return val > 9 ? val : "0" + val; }
    setInterval( function(){
        document.getElementById("seconds").innerHTML=pad(++sec%60);
        document.getElementById("minutes").innerHTML=pad(parseInt(sec/60,10));
    }, 1000);

</script>
{% endblock %}
</html>